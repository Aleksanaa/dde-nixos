From 2b6e3a6c37af3c4cc8b9b75ac23a2aab411c233a Mon Sep 17 00:00:00 2001
From: rewine <luhongxu@deepin.org>
Date: Mon, 16 Jan 2023 01:11:35 +0800
Subject: [PATCH] fix path for nixos

---
 src/vendor/src/libxsys/FileSystem/FileSystem.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/vendor/src/libxsys/FileSystem/FileSystem.cpp b/src/vendor/src/libxsys/FileSystem/FileSystem.cpp
index c3d4b28..dcb95cb 100644
--- a/src/vendor/src/libxsys/FileSystem/FileSystem.cpp
+++ b/src/vendor/src/libxsys/FileSystem/FileSystem.cpp
@@ -25,7 +25,7 @@ QString TmpFilePath(const QString &filename, const QString &distFilename)
 {
 //fix bug 16574 非开发者模式第三方程序无法签名的问题，现将第三放程序写到/usr/bin下面，mac平台保持原样
 #ifdef Q_OS_LINUX
-    QString tmpDir = "/usr/bin/";
+    QString tmpDir = QStandardPaths::standardLocations(QStandardPaths::AppDataLocation).first();
 #endif
 #ifndef Q_OS_LINUX
     QString tmpDir = QStandardPaths::standardLocations(QStandardPaths::AppDataLocation).first();
@@ -190,6 +190,7 @@ QString SearchBin(const QString &binName)
     paths.push_back("/bin/");
     paths.push_back("/usr/bin/");
     paths.push_back("/usr/local/bin/");
+    paths.push_back("/run/current-system/sw/bin");
     return PathSearch(binName, paths);
 }
 
-- 
2.38.1

