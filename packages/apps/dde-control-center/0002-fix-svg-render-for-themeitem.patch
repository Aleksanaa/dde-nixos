From 84bd7e4fcd34f463bc8cae0dc33849dc62edbb0d Mon Sep 17 00:00:00 2001
From: rewine <lhongxu@outlook.com>
Date: Thu, 22 Dec 2022 21:42:42 +0800
Subject: [PATCH] fix-svg-render-for-themeitem

---
 src/frame/window/modules/personalization/themeitempic.cpp | 7 ++++---
 src/frame/window/modules/personalization/themeitempic.h   | 4 ++--
 2 files changed, 6 insertions(+), 5 deletions(-)

diff --git a/src/frame/window/modules/personalization/themeitempic.cpp b/src/frame/window/modules/personalization/themeitempic.cpp
index 526ae426c..c9ecb00eb 100644
--- a/src/frame/window/modules/personalization/themeitempic.cpp
+++ b/src/frame/window/modules/personalization/themeitempic.cpp
@@ -23,7 +23,7 @@ using DTK_GUI_NAMESPACE::DSvgRenderer;
 ThemeItemPic::ThemeItemPic(QWidget *parent)
     : QWidget(parent)
     , m_isSelected(false)
-    , render(new DSvgRenderer())
+    , render(new QSvgRenderer())
 {
 }
 
@@ -79,9 +79,10 @@ void ThemeItemPic::paintEvent(QPaintEvent *event)
     //first draw image
     const auto ratio = devicePixelRatioF();
     QSize defaultSize = render->defaultSize() * ratio;
-    QImage img = render->toImage(defaultSize);
+    //QImage img = render->toImage(defaultSize);
     QRect picRect = rect().adjusted(totalSpace, totalSpace, -totalSpace, -totalSpace);
-    painter.drawImage(picRect, img, img.rect());
+    //painter.drawImage(picRect, img, img.rect());
+    render->render(&painter, picRect);
 
     //second draw picture rounded rect bound
     QPen pen;
diff --git a/src/frame/window/modules/personalization/themeitempic.h b/src/frame/window/modules/personalization/themeitempic.h
index 9fe5fc1ab..34454bb72 100644
--- a/src/frame/window/modules/personalization/themeitempic.h
+++ b/src/frame/window/modules/personalization/themeitempic.h
@@ -6,7 +6,7 @@
 
 #include "interface/namespace.h"
 
-#include <DSvgRenderer>
+#include <QSvgRenderer>
 
 #include <QWidget>
 
@@ -33,7 +33,7 @@ protected:
 
 private:
     bool m_isSelected = false;
-    DTK_GUI_NAMESPACE::DSvgRenderer *render;
+    QSvgRenderer *render;
 };
 }
 }
-- 
2.38.1

