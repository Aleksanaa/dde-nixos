From a4b254ec87329913e3f4a2f238f8db3c3eb6a0cc Mon Sep 17 00:00:00 2001
From: rewine <luhongxu@deepin.org>
Date: Wed, 28 Dec 2022 22:59:00 +0800
Subject: [PATCH] fix PATH when was launched by dbus

---
 bin/dde-system-daemon/main.go | 2 +-
 grub2/modify_manger.go        | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/bin/dde-system-daemon/main.go b/bin/dde-system-daemon/main.go
index e39fa46b..f3de0d8c 100644
--- a/bin/dde-system-daemon/main.go
+++ b/bin/dde-system-daemon/main.go
@@ -78,7 +78,7 @@ func main() {
 	// fix no PATH when was launched by dbus
 	if os.Getenv("PATH") == "" {
 		logger.Warning("No PATH found, manual special")
-		err = os.Setenv("PATH", "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin")
+		err = os.Setenv("PATH", "/run/current-system/sw/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin")
 		if err != nil {
 			logger.Warning(err)
 		}
diff --git a/grub2/modify_manger.go b/grub2/modify_manger.go
index a811770b..9eec569a 100644
--- a/grub2/modify_manger.go
+++ b/grub2/modify_manger.go
@@ -21,7 +21,7 @@ const (
 )
 
 func init() {
-	_ = os.Setenv("PATH", "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin")
+	_ = os.Setenv("PATH", "/run/current-system/sw/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin")
 }
 
 type modifyManager struct {
-- 
2.38.1

